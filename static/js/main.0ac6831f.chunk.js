(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{46:function(e,t,a){e.exports=a(73)},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"getMovieData",(function(){return N})),a.d(n,"getLoadingStatus",(function(){return T})),a.d(n,"getErrorMsg",(function(){return I})),a.d(n,"getFilteredData",(function(){return C}));var r={};a.r(r),a.d(r,"getMovieTileData",(function(){return M})),a.d(r,"isDataLoading",(function(){return A}));var i,c=a(0),l=a.n(c),s=a(20),o=a.n(s),u=a(18),d=a(42),g=a(13),h=a(43),m=a(17),p=a(44),v=a(23),f=a.n(v),b=a(24),E=a.n(b),O=function(e,t,a){var n={apikey:94573372,s:e,page:a};return"all"!==t&&(n.type=t),E.a.get("https://www.omdbapi.com/",{params:n}).then((function(e){return e.data.pagenum=a,e}))},y=function(e){var t=window.localStorage.getItem("favItems");if(null!=t&&t){if(t.length>0){(t=JSON.parse(t)).every((function(t){return t.imdbID==e}))?t=t.filter((function(t){return t.imdbID!==e})):t.push(e)}}else(t=[]).push(e);t=JSON.stringify(t),window.localStorage.setItem("favItems",t)},D=function(e,t){var a,n,r=JSON.parse(window.localStorage.getItem("favItems"));return t&&r?(n=!0,a=e.data.filter((function(e){return-1!==r.indexOf(e.imdbID)}))):(a=e.data,n=!1),{data:a,isFilterApplied:n}},k="FETCH_MOVIE_DATA",j="FAV_ITEMS",S="SET_GET_LOCAL_STORAGE",P={getMovieData:function(e,t,a){return{type:k,payload:O(e,t,a)}},setGetLocalStorageItems:function(e){return{type:S,payload:y(e)}},toggleFavItems:function(e,t){return{type:j,payload:D(e,t)}}},F=f()((i={},Object(m.a)(i,k,{PENDING:function(e){return Object.assign({},e,{ui:{loading:!0}})},FULFILLED:function(e,t){return Object.assign({},e,{data:t.payload.data,ui:{loading:!1}})},REJECTED:function(e,t){return Object.assign({},e,{error:t.payload.error})}}),Object(m.a)(i,j,(function(e,t){return Object(p.a)({},e,{isFilterApplied:t.payload.isFilterApplied,filterData:t.payload.data})})),i),{ui:{loading:!1},data:{},filterData:[],error:null,isFilterApplied:!1}),N=function(e){var t=e.movieReducer,a=t.data,n=t.isFilterApplied;if("True"===a.Response){var r=a.totalResults;return{data:a.Search,isFilterApplied:n,totalResults:r,pagenum:a.pagenum}}return"False"===a.Response&&a.Error?{error:a.Error}:{initialContent:!0}},C=function(e){var t=e.movieReducer,a=t.filterData,n=t.isFilterApplied;return a.length>0?{data:a,isFilterApplied:n}:{data:[],isFilterApplied:n}},T=function(e){return e.movieReducer.ui.loading},I=function(e){return e.movieReducer.error},M=function(e){var t=e.movieDetailReducer.data;return Object.keys(t).length>0?{data:t}:{data:{}}},A=function(e){return e.movieDetailReducer.loading},w=function(e){var t=e.type,a=e.id,n={};return"all"!==e.type&&(n.type=t),n.i=a,n.apikey=94573372,E.a.get("https://www.omdbapi.com/",{params:n})},L="GET_MOVIE_DETAIL",R={getMovieDetial:function(e){return{type:L,payload:w(e)}}},x=f()(Object(m.a)({},L,{PENDING:function(e,t){return Object.assign({},e,{ui:{loading:!0}})},FULFILLED:function(e,t){return Object.assign({},e,{data:t.payload.data,ui:{loading:!1}})},REJECTED:function(e,t){return Object.assign({},e,{error:t.payload.message,ui:{loading:!1}})}}),{ui:{loading:!1},data:{},error:null}),G=Object(g.c)({movieReducer:F,movieDetailReducer:x}),V=(a(71),a(3)),_=a(4),J=a(6),B=a(5),U=a(2),H=a(7),Y=function(e){function t(e){var a;return Object(V.a)(this,t),(a=Object(J.a)(this,Object(B.a)(t).call(this,e))).getSelectedId=function(e){return function(t){a.setState((function(e){return{isOpen:!e.isOpen}}),(function(){return a.props.toggleSelected(e)}))}},a.state={isOpen:!1},a.toggleDrop=a.toggleDrop.bind(Object(U.a)(a)),a}return Object(H.a)(t,e),Object(_.a)(t,[{key:"toggleDrop",value:function(){this.setState((function(e){return{isOpen:!e.isOpen}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.title,r=this.state.isOpen;return l.a.createElement("div",{className:"dd-block"},l.a.createElement("div",{className:"dd-header-block",onClick:this.toggleDrop},l.a.createElement("div",{className:"dd-header-title"},n)),r&&l.a.createElement("ul",{className:"dd-list-block"},a.map((function(t,a){return l.a.createElement("li",{className:"dd-list-item",key:t.type,onClick:e.getSelectedId(a)},t.name)}))))}}]),t}(c.Component),q=function(e){function t(e){var a;return Object(V.a)(this,t),(a=Object(J.a)(this,Object(B.a)(t).call(this,e))).searchCall=function(e){a.setState({inptVal:e.target.value})},a.state={inptVal:"",slctTitle:"All",slctType:"all",checked:!1,searchList:[{name:"All",type:"all",selected:!0},{name:"Movie",type:"movie",selected:!1},{name:"Series",type:"series",selected:!1},{name:"Episode",type:"episode",selected:!1}]},a.delayCall=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var c=function(){a=null,e.apply(void 0,r)};clearTimeout(a),a=setTimeout(c,t)}}(a.searchCall,500),a.searchInput=a.searchInput.bind(Object(U.a)(a)),a.onSearch=a.onSearch.bind(Object(U.a)(a)),a.toggleSelected=a.toggleSelected.bind(Object(U.a)(a)),a.onChange=a.onChange.bind(Object(U.a)(a)),a}return Object(H.a)(t,e),Object(_.a)(t,[{key:"onSearch",value:function(){var e=this.state,t=e.inptVal,a=e.slctType;this.props.getSearchTerm(t,a)}},{key:"searchInput",value:function(e){e.persist(),this.delayCall(e)}},{key:"toggleSelected",value:function(e){var t=this.state.searchList[e];t.selected=!t.selected,this.setState({slctTitle:t.name,slctType:t.type})}},{key:"onChange",value:function(e){var t=this,a=e.target.checked;this.setState((function(e){return{checked:!e.checked}}),(function(){return t.props.isFavSelected(a)}))}},{key:"render",value:function(){var e=this.state.checked;return l.a.createElement("div",{className:"search-box"},l.a.createElement(Y,{list:this.state.searchList,toggleSelected:this.toggleSelected,title:this.state.slctTitle}),l.a.createElement("div",{className:"search-input-block"},l.a.createElement("input",{className:"search-input",type:"text",onChange:this.searchInput})),l.a.createElement("div",{className:"search-button-block"},l.a.createElement("div",{className:"button-styl",onClick:this.onSearch},"Search")),l.a.createElement("div",{className:"fav-checkbox"},l.a.createElement("label",null,"checkFavourite",l.a.createElement("input",{type:"checkbox",name:"fav-button",checked:e,onChange:this.onChange}))))}}]),t}(c.Component),z=function(e){function t(e){var a;return Object(V.a)(this,t),(a=Object(J.a)(this,Object(B.a)(t).call(this,e))).state={},a.selectFav=a.selectFav.bind(Object(U.a)(a)),a.loadSearchPage=a.loadSearchPage.bind(Object(U.a)(a)),a}return Object(H.a)(t,e),Object(_.a)(t,[{key:"selectFav",value:function(){var e=this.props,t=e.item,a=e.selectFav;a(t.imdbID)}},{key:"loadSearchPage",value:function(){var e=this.props,t=e.item,a=e.loadSearchPage;a(t.imdbID)}},{key:"render",value:function(){var e=this.props.item,t=e.Poster,a=e.Title,n=e.Year,r="N/A"===t?"":t;return l.a.createElement("div",{className:"product-detail-list",onClick:this.loadSearchPage},l.a.createElement("div",{className:"product-image"},l.a.createElement("img",{src:r,alt:a})),l.a.createElement("div",{className:"product-info"},l.a.createElement("h4",null,a),l.a.createElement("h5",null,n)),l.a.createElement("div",{className:"fav-button",onClick:this.selectFav},"Mark Fav"))}}]),t}(c.Component),K=function(e){function t(e){var a;return Object(V.a)(this,t),(a=Object(J.a)(this,Object(B.a)(t).call(this,e))).selectFav=a.selectFav.bind(Object(U.a)(a)),a}return Object(H.a)(t,e),Object(_.a)(t,[{key:"selectFav",value:function(e){this.props.selectFav(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.movieData,n=t.loadingStatus,r=t.errorMsg,i=t.searchData,c=t.isFavChecked;return Object.keys(a).length<=0||a.initialContent?l.a.createElement("div",{className:"mt-60"},"Please search for the movies"):n?l.a.createElement("div",{className:"mt-60"}," Please wait while we loading the results for you"):r?l.a.createElement("div",{className:"mt-60"},r):a.error?l.a.createElement("div",{className:"mt-60"},a.error):i.length<=0&&c?l.a.createElement("div",{className:"mt-60"},"Sorry there are no favourite movies for your selection"):l.a.createElement("div",{className:"product-detail-box"},i.map((function(t,a){return l.a.createElement(z,{loadSearchPage:e.props.loadSearchPage,selectFav:e.selectFav,key:"".concat(a,"-").concat(t.imdbID),item:t})})))}}]),t}(c.Component),Q=function(e){function t(e){var a;return Object(V.a)(this,t),(a=Object(J.a)(this,Object(B.a)(t).call(this,e))).getPageData=function(e){return function(t){a.props.getPageData(e)}},a.state={currentPage:e.currentPage||1},a.prevPageClick=a.prevPageClick.bind(Object(U.a)(a)),a.nextPageClick=a.nextPageClick.bind(Object(U.a)(a)),a}return Object(H.a)(t,e),Object(_.a)(t,[{key:"prevPageClick",value:function(){var e,t=this,a=this.state.currentPage;a-1<=1&&(e=a),e=a-1,this.setState({currentPage:e},(function(){t.getPaginationNumbers(),t.props.getPageData(e)}))}},{key:"nextPageClick",value:function(){var e,t=this,a=this.state.currentPage;a+1>=this.totalPages&&(e=this.totalPages),e=a+1,this.setState({currentPage:e},(function(){t.getPaginationNumbers(),t.props.getPageData(e)}))}},{key:"getPaginationNumbers",value:function(){var e,t,a=this.state.currentPage,n=this.props.totalResults;if(this.totalPages=Math.floor(n/10),a<=1?a=1:a>=this.totalPages&&(a=this.totalPages),this.totalPages<=4)e=1,t=this.totalPages;else{var r=Math.floor(2),i=Math.ceil(2)-1;a<=r?(e=1,t=4):a+i>=this.totalPages?(e=this.totalPages-4+1,t=this.totalPages):(e=a-r,t=a+i)}var c=Array.from(Array(t+1-e).keys()).map((function(t){return e+t}));return c[0]>1&&c.unshift("previous"),c[c.length-1]<this.totalPages&&c.push("next"),c}},{key:"render",value:function(){var e=this,t=this.state.currentPage,a=this.getPaginationNumbers();return l.a.createElement("div",null,l.a.createElement("ul",{className:"flex justify-center"},a.map((function(a){return"previous"===a?l.a.createElement("li",{className:"prev-page",onClick:e.prevPageClick},"previous"):"next"===a?l.a.createElement("li",{className:"next-page",onClick:e.nextPageClick},"next"):l.a.createElement("li",{className:a==t?"active-page":"numbers-page",onClick:e.getPageData(a)},a)}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.currentPage!==t.currentPage)return{currentPage:e.currentPage}}}]),t}(c.Component),W=a(16),X=function(e){function t(e){var a;return Object(V.a)(this,t),(a=Object(J.a)(this,Object(B.a)(t).call(this,e))).state={searchTerm:"",searchData:[],isFavChecked:!1,genreType:"all",pageNum:1,searchVal:""},a.getSearchTerm=a.getSearchTerm.bind(Object(U.a)(a)),a.isFavSelected=a.isFavSelected.bind(Object(U.a)(a)),a.selectFav=a.selectFav.bind(Object(U.a)(a)),a.loadSearchPage=a.loadSearchPage.bind(Object(U.a)(a)),a.getPageData=a.getPageData.bind(Object(U.a)(a)),a}return Object(H.a)(t,e),Object(_.a)(t,[{key:"getSearchTerm",value:function(e,t){var a=this,n=this.state.pageNum;this.setState({genreType:t,searchVal:e},(function(){return a.props.getMovieData(e,t,n)}))}},{key:"isFavSelected",value:function(e){var t=this.props.movieData;this.props.toggleFavItems(t,e)}},{key:"selectFav",value:function(e){this.props.setGetLocalStorageItems(e)}},{key:"loadSearchPage",value:function(e){var t=this.state.genreType;this.props.history.push("/searchdetail/".concat(t,"/").concat(e))}},{key:"getPageData",value:function(e){var t=this.props.getMovieData,a=this.state;t(a.searchVal,a.genreType,e)}},{key:"render",value:function(){var e=this.props,t=e.loadingStatus,a=e.errorMsg,n=e.movieData,r=this.state,i=r.searchData,c=r.isFavChecked;return l.a.createElement("div",null,l.a.createElement(q,{getSearchTerm:this.getSearchTerm,isFavSelected:this.isFavSelected}),l.a.createElement(K,{movieData:n,searchData:i,loadingStatus:t,errorMsg:a,selectFav:this.selectFav,isFavChecked:c,loadSearchPage:this.loadSearchPage}),n&&n.totalResults>1&&!n.isFilterApplied?l.a.createElement(Q,{totalResults:n.totalResults,getPageData:this.getPageData,currentPage:this.state.pageNum}):null)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.movieData,n=e.filteredData;return Number(a.pagenum)&&a.pagenum!==t.pageNum?{searchData:a.data,pageNum:a.pagenum}:a.data&&a.data.length!==t.searchData.length&&!a.isFilterApplied?{searchData:a.data,isFavChecked:!1}:n.isFilterApplied?{searchData:n.data,isFavChecked:!0}:null}}]),t}(c.Component),Z=Object(W.f)(Object(u.b)((function(e){return{movieData:n.getMovieData(e),filteredData:n.getFilteredData(e),loadingStatus:n.getLoadingStatus(e),errorMsg:n.getErrorMsg(e)}}),(function(e){return Object(g.b)({getMovieData:P.getMovieData,toggleFavItems:P.toggleFavItems,setGetLocalStorageItems:P.setGetLocalStorageItems},e)}))(X)),$=function(e){function t(e){return Object(V.a)(this,t),Object(J.a)(this,Object(B.a)(t).call(this,e))}return Object(H.a)(t,e),Object(_.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params;this.props.fetchMovieDetail(e)}},{key:"render",value:function(){var e=this.props,t=e.getMovieDetail;if(e.isDataLoading)return l.a.createElement("div",null,"Please wait while we fetching the results for you");if(Object.keys(t.data).length<=0)return l.a.createElement("div",null,"There are no results found for this selection ");var a=t.data,n=a.Poster,r=a.Title,i=(a.Rated,a.Awards,a.BoxOffice,a.Language),c=a.Country,s=a.Actors,o=a.Director,u="N/A"==n?"":n;return l.a.createElement("div",{className:"mt-60"},l.a.createElement("div",{className:"search-detail-block"},l.a.createElement("div",{className:"product-image"},l.a.createElement("img",{src:u,alt:u})),l.a.createElement("div",{className:"product-details"},l.a.createElement("h2",null,"Title: ",l.a.createElement("span",{className:"fontw-300"},r)),l.a.createElement("h3",null,"Actors: ",l.a.createElement("span",{className:"fontw-300"},s)),l.a.createElement("h4",null,"Language: ",l.a.createElement("span",{className:"fontw-300"},i)),l.a.createElement("h4",null,"Country: ",l.a.createElement("span",{className:"fontw-300"},c)),l.a.createElement("h4",null,"Director: ",l.a.createElement("span",{className:"fontw-300"},o)))))}}]),t}(c.Component),ee=Object(W.f)(Object(u.b)((function(e){return{getMovieDetail:r.getMovieTileData(e),isDataLoading:r.isDataLoading(e)}}),(function(e){return Object(g.b)({fetchMovieDetail:R.getMovieDetial},e)}))($)),te=a(22);var ae=document.getElementById("root"),ne=Object(g.d)(G,Object(g.a)(h.a,d.a));o.a.render(l.a.createElement(u.a,{store:ne},l.a.createElement((function(){return l.a.createElement("div",{className:"App"},l.a.createElement(te.a,{basename:"".concat("/movieapplication","/")},l.a.createElement(W.c,null,l.a.createElement(W.a,{path:"/",exact:!0},l.a.createElement(Z,null)),l.a.createElement(W.a,{path:"/searchdetail/:type/:id",exact:!0},l.a.createElement(ee,null)))))}),null)),ae)}},[[46,1,2]]]);
//# sourceMappingURL=main.0ac6831f.chunk.js.map