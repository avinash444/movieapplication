(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{34:function(e,t,a){e.exports=a(61)},60:function(e,t,a){},61:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"getMovieData",(function(){return C})),a.d(r,"getLoadingStatus",(function(){return N})),a.d(r,"getErrorMsg",(function(){return T})),a.d(r,"getFilteredData",(function(){return I}));var n,i=a(0),c=a.n(i),l=a(12),s=a.n(l),o=a(13),u=a(29),d=a(8),m=a(30),v=a(11),p=a(31),h=a(32),g=a.n(h),f=a(33),b=a.n(f),O=function(e,t){var a={apikey:94573372,s:e};return"all"!==t&&(a.type=t),b.a.get("https://www.omdbapi.com/",{params:a})},y=function(e){var t=window.localStorage.getItem("favItems");if(null!=t&&t){if(t.length>0){(t=JSON.parse(t)).every((function(t){return t.imdbID==e}))?t=t.filter((function(t){return t.imdbID!==e})):t.push(e)}}else(t=[]).push(e);t=JSON.stringify(t),window.localStorage.setItem("favItems",t)},F=function(e,t){var a,r,n=JSON.parse(window.localStorage.getItem("favItems"));return t?(r=!0,a=e.data.filter((function(e){return-1!==n.indexOf(e.imdbID)}))):(a=e.data,r=!1),{data:a,isFilterApplied:r}},S="FETCH_MOVIE_DATA",E="FAV_ITEMS",j="SET_GET_LOCAL_STORAGE",k={getMovieData:function(e,t){return{type:S,payload:O(e,t)}},setGetLocalStorageItems:function(e){return{type:j,payload:y(e)}},toggleFavItems:function(e,t){return{type:E,payload:F(e,t)}}},D=g()((n={},Object(v.a)(n,S,{PENDING:function(e){return Object.assign({},e,{ui:{loading:!0}})},FULFILLED:function(e,t){return Object.assign({},e,{data:t.payload.data,ui:{loading:!1}})},REJECTED:function(e,t){return Object.assign({},e,{error:t.payload.error})}}),Object(v.a)(n,E,(function(e,t){return Object(p.a)({},e,{isFilterApplied:t.payload.isFilterApplied,filterData:t.payload.data})})),n),{ui:{loading:!1},data:{},filterData:[],error:null,isFilterApplied:!1}),C=function(e){var t=e.movieReducer,a=t.data,r=t.isFilterApplied;return console.log("data",a),"True"===a.Response?{data:a.Search,isFilterApplied:r}:"False"===a.Response&&a.Error?{error:a.Error}:{initialContent:!0}},I=function(e){var t=e.movieReducer,a=t.filterData,r=t.isFilterApplied;return a.length>0?{data:a,isFilterApplied:r}:{data:[],isFilterApplied:r}},N=function(e){return e.movieReducer.ui.loading},T=function(e){return e.movieReducer.error},A=Object(d.c)({movieReducer:D}),M=(a(60),a(3)),w=a(4),L=a(6),R=a(5),x=a(1),G=a(7),J=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(L.a)(this,Object(R.a)(t).call(this,e))).getSelectedId=function(e){return function(t){a.setState((function(e){return{isOpen:!e.isOpen}}),(function(){return a.props.toggleSelected(e)}))}},a.state={isOpen:!1},a.toggleDrop=a.toggleDrop.bind(Object(x.a)(a)),a}return Object(G.a)(t,e),Object(w.a)(t,[{key:"toggleDrop",value:function(){this.setState((function(e){return{isOpen:!e.isOpen}}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.list,r=t.title,n=this.state.isOpen;return c.a.createElement("div",{className:"dd-block"},c.a.createElement("div",{className:"dd-header-block",onClick:this.toggleDrop},c.a.createElement("div",{className:"dd-header-title"},r)),n&&c.a.createElement("ul",{className:"dd-list-block"},a.map((function(t,a){return c.a.createElement("li",{className:"dd-list-item",key:t.type,onClick:e.getSelectedId(a)},t.name)}))))}}]),t}(i.Component),_=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(L.a)(this,Object(R.a)(t).call(this,e))).searchCall=function(e){console.log(e.target.value),a.setState({inptVal:e.target.value})},a.state={inptVal:"",slctTitle:"All",slctType:"all",checked:!1,searchList:[{name:"All",type:"all",selected:!0},{name:"Movie",type:"movie",selected:!1},{name:"Series",type:"series",selected:!1},{name:"Episode",type:"episode",selected:!1}]},a.delayCall=function(e,t){var a;return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];var c=function(){a=null,e.apply(void 0,n)};clearTimeout(a),a=setTimeout(c,t)}}(a.searchCall,500),a.searchInput=a.searchInput.bind(Object(x.a)(a)),a.onSearch=a.onSearch.bind(Object(x.a)(a)),a.toggleSelected=a.toggleSelected.bind(Object(x.a)(a)),a.onChange=a.onChange.bind(Object(x.a)(a)),a}return Object(G.a)(t,e),Object(w.a)(t,[{key:"onSearch",value:function(){var e=this.state,t=e.inptVal,a=e.slctType;this.props.getSearchTerm(t,a)}},{key:"searchInput",value:function(e){e.persist(),this.delayCall(e)}},{key:"toggleSelected",value:function(e){var t=this.state.searchList[e];t.selected=!t.selected,this.setState({slctTitle:t.name,slctType:t.type})}},{key:"onChange",value:function(e){var t=this,a=e.target.checked;this.setState((function(e){return{checked:!e.checked}}),(function(){return t.props.isFavSelected(a)}))}},{key:"render",value:function(){var e=this.state.checked;return c.a.createElement("div",{className:"search-box"},c.a.createElement(J,{list:this.state.searchList,toggleSelected:this.toggleSelected,title:this.state.slctTitle}),c.a.createElement("div",{className:"search-input-block"},c.a.createElement("input",{className:"search-input",type:"text",onChange:this.searchInput})),c.a.createElement("div",{className:"search-button-block"},c.a.createElement("div",{className:"button-styl",onClick:this.onSearch},"Search")),c.a.createElement("div",{className:"fav-checkbox"},c.a.createElement("label",null,"checkFavourite",c.a.createElement("input",{type:"checkbox",name:"fav-button",checked:e,onChange:this.onChange}))))}}]),t}(i.Component),P=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(L.a)(this,Object(R.a)(t).call(this,e))).state={},a.selectFav=a.selectFav.bind(Object(x.a)(a)),a}return Object(G.a)(t,e),Object(w.a)(t,[{key:"selectFav",value:function(){var e=this.props,t=e.item,a=e.selectFav;a(t.imdbID)}},{key:"render",value:function(){var e=this.props.item,t=e.Poster,a=e.Title,r=e.Year,n="N/A"===t?"":t;return c.a.createElement("div",{className:"product-detail-list"},c.a.createElement("div",{className:"product-image"},c.a.createElement("img",{src:n,alt:a})),c.a.createElement("div",{className:"product-info"},c.a.createElement("h4",null,a),c.a.createElement("h5",null,r)),c.a.createElement("div",{className:"fav-button",onClick:this.selectFav},"Mark Fav"))}}]),t}(i.Component),V=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(L.a)(this,Object(R.a)(t).call(this,e))).selectFav=a.selectFav.bind(Object(x.a)(a)),a}return Object(G.a)(t,e),Object(w.a)(t,[{key:"selectFav",value:function(e){this.props.selectFav(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.movieData,r=t.loadingStatus,n=t.errorMsg,i=t.searchData,l=t.isFavChecked;return Object.keys(a).length<=0||a.initialContent?c.a.createElement("div",{className:"mt-60"},"Please search for the movies"):r?c.a.createElement("div",{className:"mt-60"}," Please wait while we loading the results for you"):n?c.a.createElement("div",{className:"mt-60"},n):a.error?c.a.createElement("div",{className:"mt-60"},a.error):i.length<=0&&l?c.a.createElement("div",{className:"mt-60"},"Sorry there are no favourite movies for your selection"):c.a.createElement("div",{className:"product-detail-box"},i.map((function(t,a){return c.a.createElement(P,{selectFav:e.selectFav,key:"".concat(a,"-").concat(t.imdbID),item:t})})))}}]),t}(i.Component),B=function(e){function t(e){var a;return Object(M.a)(this,t),(a=Object(L.a)(this,Object(R.a)(t).call(this,e))).state={searchTerm:"",searchData:[],isFavChecked:!1},a.getSearchTerm=a.getSearchTerm.bind(Object(x.a)(a)),a.isFavSelected=a.isFavSelected.bind(Object(x.a)(a)),a.selectFav=a.selectFav.bind(Object(x.a)(a)),a}return Object(G.a)(t,e),Object(w.a)(t,[{key:"getSearchTerm",value:function(e,t){this.props.getMovieData(e,t)}},{key:"isFavSelected",value:function(e){var t=this.props.movieData;this.props.toggleFavItems(t,e)}},{key:"selectFav",value:function(e){this.props.setGetLocalStorageItems(e)}},{key:"render",value:function(){var e=this.props,t=e.loadingStatus,a=e.errorMsg,r=e.movieData,n=this.state,i=n.searchData,l=n.isFavChecked;return c.a.createElement("div",null,c.a.createElement(_,{getSearchTerm:this.getSearchTerm,isFavSelected:this.isFavSelected}),c.a.createElement(V,{movieData:r,searchData:i,loadingStatus:t,errorMsg:a,selectFav:this.selectFav,isFavChecked:l}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.movieData,r=e.filteredData;return a.data&&a.data.length!==t.searchData.length&&!a.isFilterApplied?{searchData:a.data,isFavChecked:!1}:r.isFilterApplied?{searchData:r.data,isFavChecked:!0}:null}}]),t}(i.Component),H=Object(o.b)((function(e){return{movieData:r.getMovieData(e),filteredData:r.getFilteredData(e),loadingStatus:r.getLoadingStatus(e),errorMsg:r.getErrorMsg(e)}}),(function(e){return Object(d.b)({getMovieData:k.getMovieData,toggleFavItems:k.toggleFavItems,setGetLocalStorageItems:k.setGetLocalStorageItems},e)}))(B);var U=document.getElementById("root"),Y=Object(d.d)(A,Object(d.a)(m.a,u.a));s.a.render(c.a.createElement(o.a,{store:Y},c.a.createElement((function(){return c.a.createElement("div",{className:"App"},c.a.createElement(H,null))}),null)),U)}},[[34,1,2]]]);
//# sourceMappingURL=main.49b3cf16.chunk.js.map